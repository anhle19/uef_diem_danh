@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
	Layout = "~/Views/Layout/Main.cshtml";
	ViewData["Title"] = "Quản lý học viên của lớp học";
}

<div>
	@if (TempData["StudyClassSuccessMessage"] != null)
	{
		<div class="bg-success p-2 text-white">
			@TempData["StudyClassSuccessMessage"]
		</div>
	}
	@if (TempData["StudyClassErrorMessage"] != null)
	{
		<div class="bg-danger">
			@TempData["StudyClassErrorMessage"]
		</div>
	}
	<div class="d-flex justify-content-between align-items-start mb-3">
		<div style="width: 20rem">
			<h2 class="table-title">Quản lý học viên của lớp học</h2>
			<div class="d-flex search-row">
				<form id="searchOrderStudyClassForm"
					  style="width: 100%">

					<input id="studyClassSearchInput"
						   class="form-control form-control-sm"
						   name="StudyClassName"
						   placeholder="Tìm theo tên lớp..."
						   style="width: 70%; display: inline" />
					<button type="button"
							class="btn-next-secondary btn-sm"
							id="btnSearch"
							onclick="searchStudyClass()">
						Tìm
					</button>
				</form>
			</div>
		</div>
		<div>
			<button type="button"
					class="btn-next-secondary btn -sm btn-add"
					data-bs-toggle="modal"
					data-bs-target="#popupThemLop">
				Thêm lớp học
			</button>
		</div>
	</div>

	<div class="table-wrapper">
		<div id="searchResultLabel" style="display: none">Kết quả tìm kiếm: </div>
		<table id="studyClassTable" class="fl-table">
			<thead>
				<tr>
					<th>Mã lớp</th>
					<th>Tên lớp</th>
					<th>Ngày bắt đầu</th>
					<th>Ngày kết thúc</th>
					<th>Import</th>
					<th>Học viên</th>
					<th>Buổi học</th>
					<th></th>
					<th></th>
				</tr>
			</thead>
			<tbody id="classesTableBody">
				@foreach (var studyClass in Model)
				{
					<tr>
						<td>@studyClass.Id</td>
						<td>@studyClass.StudyClassName</td>
						<td>@studyClass.StartDate.ToString("dd/MM/yyyy")</td>
						<td>@studyClass.EndDate.ToString("dd/MM/yyyy")</td>
						<td>
							<button class="btn btn-outline-secondary btn-sm btn-import"
									data-id="@studyClass.Id"
									data-bs-toggle="modal"
									data-bs-target="#popupImport">
								Import
							</button>
						</td>
						<td>
							<button class="btn btn-outline-primary btn-sm btn-view-students"
									data-id="@studyClass.Id"
									data-bs-toggle="modal"
									data-bs-target="#popupHocVien">
								Xem
							</button>
						</td>
						<td>
							<a class="action-link"
							   href="/html/layout/main.html?page=classes&classId=@studyClass.Id">
								Quản lý buổi học
							</a>
						</td>
						<td>
							<button class="btn btn-outline-secondary btn-sm btn-edit"
									data-id="@studyClass.Id"
									data-bs-toggle="modal"
									data-bs-target="#popupSuaLop"
									onclick="initUpdateStudyClassFields(@studyClass.Id)">
								Sửa
							</button>
						</td>
						<td>
							<button class="btn btn-outline-danger btn-sm btn-delete"
									data-id="@studyClass.Id"
									data-bs-toggle="modal"
									data-bs-target="#popupXoaLop"
									onclick="initDeleteStudyClassField(@studyClass.Id)">
								Xoá
							</button>
						</td>
					</tr>
				}
			</tbody>
		</table>
	</div>
</div>