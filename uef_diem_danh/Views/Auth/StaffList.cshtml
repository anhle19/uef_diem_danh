@model IEnumerable<uef_diem_danh.DTOs.StaffGetRequest>

@{
	Layout = "~/Views/Layout/Main.cshtml";
	ViewData["Title"] = "Quản lý học viên";
}


<div>
	@if (TempData["StaffSuccessMessage"] != null)
	{
		<div class="bg-success p-2 text-white">
			@TempData["StaffSuccessMessage"]
		</div>
	}
	@if (TempData["StaffErrorMessage"] != null)
	{
		<div class="bg-danger">
			@TempData["StaffErrorMessage"]
		</div>
	}
	<div class="mb-3 flex-column">
		<div>
			<h2 class="table-title">Quản lý nhân viên</h2>
		</div>
		<div class="d-flex justify-content-between align-items-center mb-3">
			<!-- Khối tìm kiếm bên trái -->
			<div class="d-flex search-row" style="flex: 1">
				<form id="searchOrderStaffForm" class="d-flex w-100" onsubmit="return preventSearchStaffSubmit()">
					<input id="staffSearchInput" class="form-control form-control-sm me-2"
							style="width: 20rem"
						   name="PhoneNumber" placeholder="Tìm theo số điện thoại..." />
					<button type="button" class="btn-next-secondary btn-sm" id="btnSearch" onclick="searchStaff()">
						Tìm
					</button>
				</form>
			</div>

			<!-- Nút thêm nhân viên bên phải -->
			<div>
				<button type="button" class="btn-next-secondary btn-sm btn-add" data-bs-toggle="modal"
						data-bs-target="#popupThemNhanVien">
					Thêm Nhân Viên
				</button>
			</div>
		</div>

	</div>

	<div class="table-wrapper">
		<div id="searchResultLabel" style="display: none">Kết quả tìm kiếm: </div>
		<table id="staffTable" class="fl-table">
			<thead>
				<tr>
					<th class="text-center">STT</th>
					<th class="text-center">Họ tên</th>
					@* <th class="text-center">Ngày sinh</th> *@
					<th class="text-center">Địa chỉ</th>
					<th class="text-center">Số điện thoại</th>
					<th></th>
					<th></th>
					<th></th>
				</tr>
			</thead>
			<tbody id="staffsTableBody">
				@{
					int stt = 1;
				}
				@foreach (var staff in Model)
				{
					<tr>
						<td class="text-center">@stt</td>
						@{
							stt++;
						}
						<td class="text-center">@staff.FullName</td>
						@* <td class="text-center">@student.NgaySinh.ToString("dd/MM/yyyy")</td> *@
						<td class="text-center">@staff.Address</td>
						<td class="text-center">@staff.PhoneNumber</td>
						@* <td class="text-center">
							<button class="btn btn-outline-primary btn-sm btn-view-students"
									data-id="@student.MaHocVien"
									data-bs-toggle="modal"
									data-bs-target="#popupLopHoc">
								Xem
							</button>
						</td> *@
						<td class="text-center">
							<button class="btn btn-outline-secondary btn-sm btn-edit" data-id="@staff.Id"
									data-bs-toggle="modal" data-bs-target="#popupSuaNhanVien">
								Sửa
							</button>
						</td>
						<td class="text-center">
							<button class="btn btn-outline-danger btn-sm btn-delete" data-id="@staff.Id"
									data-bs-toggle="modal" data-bs-target="#popupXoaNhanVien">
								Xoá
							</button>
						</td>
						<td class="text-center">
							<button class="btn btn-outline-primary btn-sm btn-reset" data-id="@staff.Id"
									data-bs-toggle="modal" data-bs-target="#popupDatLaiMatKhau">
								Đặt lại mật khẩu
							</button>
						</td>
					</tr>
				}
			</tbody>
		</table>

		<!-- Pagination -->
		<div style="padding-top: 20px; padding-bottom: 5px">
			<ul id="paginationContainer" class="d-flex justify-content-lg-center">
			</ul>
		</div>
	</div>
</div>

@await Html.PartialAsync("/Views/Component/CreateStaffModal.cshtml", new uef_diem_danh.DTOs.StaffCreateRequest())

@await Html.PartialAsync("/Views/Component/UpdateStaffModal.cshtml", new uef_diem_danh.DTOs.StaffUpdateRequest())
																							  
@await Html.PartialAsync("/Views/Component/DeleteStaffModal.cshtml", new uef_diem_danh.DTOs.StaffDeleteRequest())

@await Html.PartialAsync("/Views/Component/ResetStaffPasswordModal.cshtml", new uef_diem_danh.DTOs.StaffResetPasswordRequest())

<script src="~/js/Staff.js"></script>